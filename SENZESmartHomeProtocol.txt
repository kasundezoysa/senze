-------------------------------
Secure Smart Home SENZE Protocool
-------------------------------
This protocol provides, authtication, integrity and non-repudiation
of SENZE. 
In addition to that it provides confidentiality of the data

1. A switch(sw1) who wants to share the control should first obtain
the pbulic key of its owner (u1).
GET #pubkey @u1 #time t1 ^sw1 Signature
Mysensor server delivers the public key as follows
DATA #pubkey PublicKeyOfu1 #time t2 ^mysensors Signature
(If u1 is not esixts, public key will be not present in the SENZE)

2. The switch should share it gpio port (gpio13)
and the symmetric key k1(Encrypted with the public key of u1) to the owner.  
SHARE #gpio13 #photo #key E(k1) #time t3 @u1 ^sw1 Signature
The owner sould reply to it as follows
SHARE #msg OK #time t4 @sw1 ^u1 Signature
(In absense of the above SENZE, sw1 should resend it SHARE SENZE)

3. The recipient should cotrol the switch by sending the following SENZE
PUT #gpio13 ON @sw1 #time t5 ^u1 Signature
The switch should response it as follows. 
DATA #gpio13 ON #photo x #time t6  ^sw1 Signature
Photo is delived by x number of data queries.
It is encrtped with key k1.
DATA #photo E(image) #time t7.1 ^sw1 Signature
DATA #photo E(image) #time t7.2 ^sw1 Signature
.......
DATA #photo E(partofimage) #time t7.x ^sw1 Signature

(Upon received this data SENZE, recipient should decrypt the photo
and display it.)

4 (Optional Step)  At any time, 
recipient can request a missing part of the photo as follows
GET #photo @sw1 #time t7.y ^u1 Signatue
DATA #photo E(partofimage) @u1 #time t7.y ^u1 Signature

5 (Optional Step)  At any time, 
recipient can request a new security key as follows
GET #key @u1 #time t7 ^u2 Signatue
DATA #key E(k2) @u2 #time t8 ^u1 Signature

